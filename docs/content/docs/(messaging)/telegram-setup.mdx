---
title: Telegram Setup
description: Step-by-step guide to connect Spacebot to Telegram.
---

# Telegram Setup Guide

How to connect Spacebot to Telegram so it can receive messages and respond through the Telegram adapter.

## Create a Bot with BotFather

### 1. Start a Chat with BotFather

Open Telegram and search for [@BotFather](https://t.me/BotFather), or click the link directly. This is Telegram's official bot for managing bots.

### 2. Create a New Bot

Send `/newbot` and follow the prompts:

- **Name**: The display name for your bot (e.g. "My Spacebot")
- **Username**: Must end in `bot` (e.g. `my_spacebot_bot`)

BotFather will respond with your **bot token**. It looks like `123456789:ABCdefGHIjklMNOpqrsTUVwxyz`. Keep this secret.

### 3. Configure Bot Settings (Optional)

Send these commands to BotFather to configure your bot:

- `/setdescription` — set the bot's profile description
- `/setabouttext` — set the "about" text shown in the bot's profile
- `/setuserpic` — set the bot's profile picture
- `/setprivacy` — set to **Disable** if you want the bot to receive all messages in groups (not just commands and mentions)

## Spacebot Configuration

Add the following to your `config.toml`:

```toml
[llm]
openrouter_key = "env:OPENROUTER_API_KEY"

[defaults.routing]
channel = "openrouter/anthropic/claude-sonnet-4-20250514"
worker = "openrouter/anthropic/claude-haiku-4.5-20250514"

[messaging.telegram]
enabled = true
token = "env:TELEGRAM_BOT_TOKEN"

[[agents]]
id = "main"
default = true

# Route a specific Telegram chat to the "main" agent
[[bindings]]
agent_id = "main"
channel = "telegram"
chat_id = "-100123456789"
```

Set the environment variables:

```bash
export TELEGRAM_BOT_TOKEN="your-bot-token-from-botfather"
export OPENROUTER_API_KEY="your-openrouter-key-here"
```

### Getting Chat IDs

Telegram chat IDs are numbers. To find them:

- **Private chats (DMs)**: The chat ID is the user's Telegram user ID. You can find this by sending a message to your bot, then checking the logs — Spacebot logs the `conversation_id` as `telegram:<chat_id>`.
- **Groups/Supergroups**: Add the bot to the group, send a message, and check the logs. Group IDs are negative numbers (e.g. `-100123456789`).
- **Channels**: Similar to groups, channel IDs are negative numbers.

Alternatively, use a bot like [@userinfobot](https://t.me/userinfobot) to find your user ID, or forward a message from the group to [@JsonDumpBot](https://t.me/JsonDumpBot) to get the chat ID.

### Open Access (No Chat Filter)

To allow messages from any chat that the bot is added to, omit `chat_id` from the binding:

```toml
[[bindings]]
agent_id = "main"
channel = "telegram"
```

### DM Access Control

By default, DMs from anyone are accepted. To restrict DMs to specific users:

```toml
[messaging.telegram]
enabled = true
token = "env:TELEGRAM_BOT_TOKEN"
dm_allowed_users = ["123456789", "987654321"]
```

When `dm_allowed_users` is empty (the default), all DMs are accepted. When populated, only listed user IDs can DM the bot.

### Multiple Chats, Multiple Agents

Route different Telegram chats to different agents:

```toml
[[agents]]
id = "community"
default = true

[[agents]]
id = "team"

[[bindings]]
agent_id = "community"
channel = "telegram"
chat_id = "-100111111111"

[[bindings]]
agent_id = "team"
channel = "telegram"
chat_id = "-100222222222"
```

## Platform Notes

### Message Limits

Telegram's message character limit is 4096 characters. Messages longer than this are automatically split at newlines, then spaces, then hard-cut.

### Typing Indicators

The bot sends `typing` indicators while processing. Telegram's typing indicator expires after 5 seconds, so Spacebot repeats it every 4 seconds until a response is ready.

### Streaming

Responses stream via `editMessageText` — a placeholder message is sent immediately, then edited as content arrives. Edits are rate-limited to ~1 per second to avoid Telegram API throttling.

### Reactions

Telegram reactions are limited to the emoji set configured for each chat. If the bot tries to react with an unsupported emoji, the reaction is silently skipped.

### File Attachments

The bot can receive and send files (documents, photos, videos, audio, voice messages). Received files are passed as attachment metadata with Telegram `file_id` URLs. Outbound files are sent via `sendDocument`.

### History Backfill

Telegram's Bot API does not support fetching message history. When Spacebot connects to a Telegram chat for the first time, it starts with no historical context. Previous conversations are available on reconnect from Spacebot's own database.

### Group Privacy Mode

By default, Telegram bots in group privacy mode only receive messages that:
- Mention the bot directly (`@your_bot_username`)
- Are replies to the bot's messages
- Are commands (`/command`)

To receive all messages in groups, disable privacy mode via BotFather: `/setprivacy` → **Disable**. This must be done before adding the bot to the group — existing groups may need the bot to be removed and re-added.
